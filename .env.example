# ================================================================
# BLOASIS Development Environment Variables
# Copy this file: cp .env.example .env, then fill in real values.
# All service environment variables are managed in this single file.
# ================================================================

# ── Infrastructure ────────────────────────────────────────────────
POSTGRES_DB=bloasis
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DATABASE_URL=postgresql+asyncpg://postgres:postgres@postgres:5432/bloasis
REDIS_HOST=redis
REDIS_PORT=6379
REDPANDA_BROKERS=redpanda:9092
CONSUL_HOST=consul
CONSUL_PORT=8500
CONSUL_ENABLED=true
LOG_LEVEL=INFO

# ── AI / LLM ─────────────────────────────────────────────────────
# Required by ALL AI services (market-regime, classification, strategy).
# Each service validates Field(min_length=1) at startup — the server will
# refuse to start if this is missing or empty.
# Get your key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=
# Model selection is managed per-service in prompts/*.yaml (model_parameters.model)

# ── External Market Data ──────────────────────────────────────────
# Required by market-regime: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=
# Required by market-data: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_KEY=

# ── Trading ───────────────────────────────────────────────────────
# Alpaca credentials are managed via Settings UI and stored encrypted in DB.
# No env vars needed — configure through the dashboard Settings page.

# ── Credential Encryption ───────────────────────────────────────
# Fernet key for encrypting broker credentials stored in DB.
# Required by user service when using Settings UI for Alpaca keys.
# Generate: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
CREDENTIAL_ENCRYPTION_KEY=

# ── Authentication ────────────────────────────────────────────────
# RS256 asymmetric keys — generate with: ./scripts/generate_jwt_keys.sh
JWT_PRIVATE_KEY_PATH=infra/keys/jwt-private.pem
JWT_PUBLIC_KEY_PATH=infra/keys/jwt-public.pem
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# ── Cache TTL (optional overrides) ────────────────────────────────
REGIME_CACHE_TTL=21600
CACHE_TTL=3600

# ── Backtesting ───────────────────────────────────────────────────
DEFAULT_INITIAL_CASH=100000.00
DEFAULT_COMMISSION=0.001
DEFAULT_SLIPPAGE=0.001
MIN_SHARPE_RATIO=0.5
MAX_DRAWDOWN_THRESHOLD=0.30
MIN_WIN_RATE=0.40

# ── Risk Committee ────────────────────────────────────────────────
DEFAULT_MAX_POSITION_SIZE=0.10
DEFAULT_MAX_SINGLE_ORDER=0.05
DEFAULT_MAX_SECTOR_CONCENTRATION=0.30
VIX_HIGH_THRESHOLD=30
VIX_EXTREME_THRESHOLD=40

# ── Frontend ─────────────────────────────────────────────────────
NEXT_PUBLIC_API_URL=http://localhost:8000
