# =============================================================================
# BLOASIS Production Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values
# NEVER commit .env to git!
# =============================================================================

# -----------------------------------------------------------------------------
# Infrastructure - PostgreSQL
# -----------------------------------------------------------------------------
# Database name for the BLOASIS platform
POSTGRES_DB=bloasis

# Database user (create a dedicated user for production)
POSTGRES_USER=postgres

# Database password (use a strong, randomly generated password)
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=your_secure_password_here

# Database connection URL for async services
# Format: postgresql+asyncpg://<user>:<password>@<host>:<port>/<database>
DATABASE_URL=postgresql+asyncpg://postgres:your_secure_password_here@postgres:5432/bloasis

# -----------------------------------------------------------------------------
# Infrastructure - Redis
# -----------------------------------------------------------------------------
# Redis host (container name in Docker Compose)
REDIS_HOST=redis

# Redis port (default: 6379)
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Infrastructure - Redpanda
# -----------------------------------------------------------------------------
# Redpanda broker addresses (Kafka-compatible)
# For multiple brokers: redpanda-0:9092,redpanda-1:9092,redpanda-2:9092
REDPANDA_BROKERS=redpanda:9092

# -----------------------------------------------------------------------------
# External APIs - Required
# -----------------------------------------------------------------------------

# Alpaca Markets (Paper Trading)
# Sign up and get API keys from: https://app.alpaca.markets/
# Paper trading keys are free and safe for testing
ALPACA_API_KEY=your_alpaca_api_key
ALPACA_SECRET_KEY=your_alpaca_secret_key

# Paper trading mode (true = paper trading, false = live trading)
# WARNING: Set to false ONLY when ready for live trading with real money
ALPACA_PAPER=true

# Anthropic API (Claude)
# Get your API key from: https://console.anthropic.com/
# Used for market regime classification, technical analysis, and risk assessment
ANTHROPIC_API_KEY=your_anthropic_api_key

# -----------------------------------------------------------------------------
# External APIs - Optional
# -----------------------------------------------------------------------------

# FRED API (Federal Reserve Economic Data)
# Get your free API key from: https://fred.stlouisfed.org/docs/api/api_key.html
# Used for economic indicators in market regime classification
FRED_API_KEY=

# Alpha Vantage API (Market Data)
# Get your free API key from: https://www.alphavantage.co/support/#api-key
# Used as fallback for market data
ALPHA_VANTAGE_KEY=

# -----------------------------------------------------------------------------
# JWT Authentication (RS256 asymmetric keys)
# -----------------------------------------------------------------------------
# Generate keys with: ./scripts/generate_jwt_keys.sh
# Private key: Auth service uses for signing tokens
JWT_PRIVATE_KEY_PATH=/app/keys/jwt-private.pem

# Public key: Envoy Gateway and other services use for verifying tokens
JWT_PUBLIC_KEY_PATH=/app/keys/jwt-public.pem

# Token expiration settings
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# Service Discovery - Consul
# -----------------------------------------------------------------------------
# Consul host (container name in Docker Compose)
CONSUL_HOST=consul

# Consul HTTP port
CONSUL_PORT=8500

# Enable/disable Consul service registration
CONSUL_ENABLED=true

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use INFO for production, DEBUG for troubleshooting
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Backtesting Configuration
# -----------------------------------------------------------------------------
# Default initial capital for backtesting simulations
DEFAULT_INITIAL_CASH=100000.00

# Trading commission (as decimal, 0.001 = 0.1%)
DEFAULT_COMMISSION=0.001

# Slippage estimation (as decimal, 0.001 = 0.1%)
DEFAULT_SLIPPAGE=0.001

# Minimum acceptable Sharpe Ratio for strategy approval
MIN_SHARPE_RATIO=0.5

# Maximum acceptable drawdown (as decimal, 0.30 = 30%)
MAX_DRAWDOWN_THRESHOLD=0.30

# Minimum acceptable win rate (as decimal, 0.40 = 40%)
MIN_WIN_RATE=0.40

# -----------------------------------------------------------------------------
# Kong Gateway (JWT Secret for HS256 fallback)
# -----------------------------------------------------------------------------
# Only required if using HS256 algorithm
# Must match JWT_SECRET_KEY if using HS256
# KONG_JWT_SECRET=your_jwt_secret_here_min_32_chars

# =============================================================================
# Service-Specific Settings (Optional Overrides)
# =============================================================================
# These can be set per-service or left to use defaults

# Cache TTL for user-specific data (seconds)
CACHE_TTL=3600

# =============================================================================
# Production Checklist
# =============================================================================
# Before deploying to production, ensure:
# [ ] All passwords are strong and randomly generated
# [ ] ALPACA_PAPER=true until ready for live trading
# [ ] JWT keys are generated and properly secured
# [ ] All required API keys are configured
# [ ] LOG_LEVEL is set to INFO or WARNING
# [ ] ANTHROPIC_API_KEY is set for AI-powered regime classification
# [ ] Database backups are configured
# [ ] Secrets are stored securely (not in git)
# =============================================================================
